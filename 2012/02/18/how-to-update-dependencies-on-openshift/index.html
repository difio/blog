
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-us" xml:lang="en-us" xmlns:fb="https://www.facebook.com/2008/fbml" id="html-main">
<head>
  <title>How to update dependencies on OpenShift - monupco</title>
  
  <meta name="description" content="How to Update Dependencies on OpenShift Posted by Alexander Todorov
@ Feb 18th, 2012 If you are already running some cool application on OpenShift &hellip;" />
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  
  <link rel="canonical" href="http://monupco.com/blog/2012/02/18/how-to-update-dependencies-on-openshift" />
  <link href="/blog/favicon.png" rel="icon" />
  <script src="/blog/javascripts/modernizr-2.0.js" type="text/javascript"></script>
  <script src="/blog/javascripts/ender.js" type="text/javascript"></script>
  <script src="/blog/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/blog/atom.xml" rel="alternate" title="monupco" type="application/atom+xml" />
  <meta name="description" content="Monitor Updates In The Cloud" />

<!-- OpenGraph -->
<meta property="og:image" content="http://monupco.com/static/images/logo_mo.png" />
<meta property="og:title" content="monupco" />
<meta property="og:description" content="Monitor Updates In The Cloud" />

<link href='http://fonts.googleapis.com/css?family=Lobster' rel='stylesheet' type='text/css' />
<link type="text/css" rel="stylesheet" media="screen" href="http://monupco.com/static/css/style.css" />

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-28789374-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
    <div id="header">
    <h1><a href="/blog/" class="logo">monupco</a><sub>blog</sub></h1>

        <div class="navigation">
        <ul class="global">
          <li><a href="http://monupco.com">Main Site</a></li>
          <li><a href="/blog/archives">Archives</a></li>
          <li><a href="/blog/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
        </ul>
    </div>


</div>



    <div id="frontpage" class="box">
        <div id="info">
    
        
            <h1>How to Update Dependencies on OpenShift</h1>
        
    

    <div class="part">
    <div class="title">
    
        

        
            
  

<span class="byline author vcard">Posted by <span class="fn">Alexander Todorov</span></span>
@
            








  Feb 18<span>th</span>, 2012



            <br /><br />
        
    

    
            <div class="entry-content"><p>If you are already running some cool application on <a href="http://openshift.redhat.com">OpenShift</a>
it could be the case that you have to update some of the packages installed as dependencies.
Here is an example for an application using the python-2.6 cartridge.</p>

<h2>Pull latest upstream packages</h2>

<p>The most simple method is to update everything to the latest upstream versions.</p>

<ol>
<li><p>Backup! Backup! Backup!</p>

<pre><code> rhc-snapshot -a mycoolapp
 mv mycoolapp.tar.gz mycoolapp-backup-before-update.tar.gz
</code></pre></li>
<li><p>If you haven&#8217;t specified any particular version in <code>setup.py</code> it will
look like this:</p>

<pre><code>  ...
  install_requires=[
                  'monupco-openshift-express-python',
                  'MySQL-python',
                  'Markdown',
                 ],
  ...
</code></pre></li>
<li><p>To update simply push to OpenShift instructing it to rebuild your virtualenv:</p>

<pre><code> cd mycoolapp/
 touch .openshift/markers/force_clean_build
 git add .openshift/markers/force_clean_build
 git commit -m "update to latest upstream"
 git push
</code></pre></li>
</ol>


<p>Voila! The environment hosting your application is rebuilt from scratch.</p>

<h2>Keeping some packages unchanged</h2>

<p>Suppose that before the update you have <code>Markdown-2.0.1</code> and you want to keep it!
This is easily solved by adding versioned dependency to <code>setup.py</code></p>

<pre><code>    -       'Markdown',
    +       'Markdown==2.0.1',
</code></pre>

<p>If you do that OpenShift will install the same <code>Markdown</code> version when rebuilding your
application. Everything else will use the latest available versions.</p>

<p><strong>Note:</strong> after the update it&#8217;s recommended that you remove the
<code>.openshift/markers/force_clean_build</code> file. This will speed up the push/build process
and will not surprise you with unwanted changes.</p>

<h2>Update only selected packages</h2>

<p>Unless your application is really simple or you have tested the updates, I suspect that
you want to update only selected packages. This can be done without rebuilding the whole
virtualenv. Use versioned dependencies in <code>setup.py</code> :</p>

<pre><code>    -       'Markdown==2.0.1',
    -       'django-countries',
    +       'Markdown&gt;=2.1',
    +       'django-countries&gt;=1.1.2',
</code></pre>

<p>No need for <code>force_clean_build</code> this time. Just</p>

<pre><code>    git commit &amp;&amp; git push
</code></pre>

<p>At the time of writing my application was using <code>Markdown-2.0.1</code> and <code>django-countries-1.0.5</code>.
Then it updated to <code>Markdown-2.1.1</code> and <code>django-countires-1.1.2</code> which also happened to be
the latest versions.</p>

<p><strong>Note:</strong> this will not work without <code>force_clean_build</code></p>

<pre><code>    -       'django-countries==1.0.5',
    +       'django-countries',
</code></pre>

<h2>Warning</h2>

<p>OpenShift uses a local mirror of <a href="http://pypi.python.org">Python Package Index</a>.
It seems to be updated every 24 hours or so. Have this in mind if you want to update
to a package that was just released. It will not work!</p>

<hr />

<p><a href="http://about.me/atodorov"><em>Alexander Todorov</em></a> is Monupco&#8217;s founder and lead developer!</p>

<p>For an insight of available updates to you OpenShift applications give
Monupco a <a href="https://monupco-otb.rhcloud.com/applications/mine/">try</a>!
It keeps generating new <a href="http://monupco.com/advisories/">advisories</a> every day!</p>
</div>
    

    
            <br />Categories: 

<span class="categories">
  
    <a class='category' href='/blog/categories/openshift/'>OpenShift</a>, <a class='category' href='/blog/categories/tips/'>Tips</a>
  
</span>


    
    </div>
</div>

</div>

<div id="get-started">
  <div style="display: block; border-bottom: #ce1126 1px dotted; margin-bottom: 15px; padding-bottom:25px;">
    
        <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://monupco.com/blog/2012/02/18/how-to-update-dependencies-on-openshift/" data-via="monupco" data-counturl="http://monupco.com/blog/2012/02/18/how-to-update-dependencies-on-openshift/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    

    
        <a style="float: left;" href="/blog/2012/02/17/monupco-1.2-release-announcement/" title="Previous Post: Monupco 1.2 Release Announcement">&laquo; Monupco 1.2 Release Announcement</a>
    

    
  </div>

    
        <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
    
</div>


    </div> <!-- END FRONTPAGE -->

      <div id="footer">
        <ul>
<!--
            <li><a href="/legal">Legal</a></li>
            <li><a href="/about">About</a></li>
-->
            <li><a href="http://twitter.com/monupco">@monupco</a></li>
            <li><a href="http://github.com/monupco">github</a></li>
            <li class="last"><a href="https://github.com/monupco/monupco.github.com/issues/new">file a bug</a></li>
        </ul>

        <div id="copyright">&copy; monupco</div>
    </div>


  
<div id="fb-root"></div>
<script type="text/javascript">(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




<script type="text/javascript">
      var disqus_shortname = 'monupco';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://monupco.com/blog/2012/02/18/how-to-update-dependencies-on-openshift/';
        var disqus_url = 'http://monupco.com/blog/2012/02/18/how-to-update-dependencies-on-openshift/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>




</body>
</html>
